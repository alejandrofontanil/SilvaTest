{% extends "base.html" %}

{% block content %}

{% if breadcrumbs %}
<nav aria-label="breadcrumb" class="mb-4">
  <ol class="breadcrumb">
    {% for text, url in breadcrumbs %}
      {% if loop.last %}
        <li class="breadcrumb-item active" aria-current="page">{{ text }}</li>
      {% else %}
        <li class="breadcrumb-item"><a href="{{ url }}">{{ text }}</a></li>
      {% endif %}
    {% endfor %}
  </ol>
</nav>
{% endif %}
<div class="card shadow-sm">
    <div class="card-body p-4">
        <h1 class="display-5">{{ convocatoria.nombre }}</h1>
        <p class="fs-4 text-muted">Selecciona un bloque para ver el temario y comenzar a estudiar.</p>
        <hr class="my-4">

        <div class="list-group">
            {% for bloque in convocatoria.bloques %}

                {% if not bloque.esta_oculto or (current_user.is_authenticated and current_user.es_admin) %}

                    <a href="{{ url_for('main.bloque_detalle', bloque_id=bloque.id) }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <span class="fw-bold fs-5">{{ bloque.nombre }}</span>
                        <i class="bi bi-chevron-right"></i>
                    </a>

                {% endif %} {% else %}
                <p class="text-muted">No hay bloques en esta convocatoria.</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}